:root {
  --bg: #0f172a;
  --card: #111827;
  --text: #e5e7eb;
  --muted: #9ca3af;
}
* { box-sizing: border-box; }
body { margin:0; font-family: Inter, system-ui, sans-serif; background: var(--bg); color: var(--text); }
.app {
  min-height: 100dvh; max-width: 560px; margin:0 auto; padding:16px;
  display:flex; flex-direction:column; gap:12px; position:relative;
  transition: background-color 180ms ease;
}
.app.correct { background: linear-gradient(180deg, #052e16, var(--bg)); }
.app.wrong { background: linear-gradient(180deg, #450a0a, var(--bg)); }
.topbar { display:flex; justify-content:space-between; align-items:flex-start; }
.topbar h1 { margin:0; font-size:1.6rem; }
.topbar p { margin:4px 0 0; color:var(--muted); }
.icon-btn { border:1px solid #374151; background:#1f2937; color:#fff; border-radius:10px; padding:8px 10px; }
.stats { display:flex; justify-content:space-between; color:var(--muted); }
.card-wrap { flex:1; display:flex; align-items:center; perspective: 1000px; }
.card {
  width:100%; min-height:52dvh; border-radius:20px; background:transparent;
  position:relative; transform-style:preserve-3d; transition: transform 220ms ease;
  touch-action: pan-y; user-select:none;
}
.card.flipped { transform: rotateY(180deg); }
.face {
  position:absolute; inset:0; border-radius:20px; background:var(--card);
  border:1px solid #1f2937; box-shadow:0 14px 36px rgba(0,0,0,.38);
  backface-visibility:hidden; display:flex; flex-direction:column; padding:18px;
}
.back { transform: rotateY(180deg); }
.visual { flex:1; display:grid; place-items:center; overflow:hidden; }
.visual img { max-width:100%; max-height:34dvh; filter: invert(1) brightness(1.05); }
.flag { font-size: 6rem; line-height:1; }
.label { text-align:center; font-size:1.3rem; font-weight:700; margin-top:8px; }
.sub { text-align:center; color:var(--muted); margin-top:4px; font-weight:600; }
.actions { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; }
.btn { border:0; border-radius:12px; padding:12px 10px; color:#fff; font-weight:700; }
.btn.wrong{ background:#991b1b; } .btn.right{ background:#166534; } .btn.neutral{ background:#334155; }
.hint { text-align:center; color:var(--muted); margin:4px 0 0; }
.toast {
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
  background:rgba(17,24,39,.95); border:1px solid #374151; border-radius:999px;
  padding:10px 14px; opacity:0; pointer-events:none; transition:opacity 120ms ease;
}
.toast.show { opacity:1; }
.settings {
  position: absolute; right:16px; top:60px; width:220px; background:#111827;
  border:1px solid #374151; border-radius:14px; padding:12px; z-index:10;
  display:flex; flex-direction:column; gap:10px;
}
.settings.hidden { display:none; }
.settings h2 { margin:0 0 4px 0; font-size:1rem; }
.settings label { display:flex; gap:8px; align-items:center; }
