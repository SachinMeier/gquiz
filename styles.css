:root {
  --bg: #0f172a;
  --card: #111827;
  --text: #e5e7eb;
  --muted: #9ca3af;
}
* { box-sizing: border-box; }
body { margin:0; font-family: Inter, system-ui, sans-serif; background: var(--bg); color: var(--text); }
.app {
  min-height: 100dvh; max-width: 560px; margin:0 auto; padding:16px;
  display:flex; flex-direction:column; gap:12px; position:relative;
}
.topbar { display:flex; justify-content:space-between; align-items:flex-start; }
.topbar h1 { margin:0; font-size:1.6rem; }
.topbar p { margin:4px 0 0; color:var(--muted); }
.icon-btn { border:1px solid #374151; background:#1f2937; color:#fff; border-radius:10px; padding:8px 10px; }
.stats { display:flex; justify-content:space-between; color:var(--muted); }
.search-wrap { position: relative; }
.search-wrap input {
  width: 100%;
  border: 1px solid #374151;
  background: #0b1220;
  color: #e5e7eb;
  border-radius: 10px;
  padding: 11px 12px;
  font-size: 0.95rem;
}
.search-wrap input:focus { outline: 2px solid #475569; outline-offset: 1px; }
.search-results {
  position: absolute;
  left: 0;
  right: 0;
  top: calc(100% + 6px);
  background: #111827;
  border: 1px solid #374151;
  border-radius: 10px;
  max-height: 240px;
  overflow: auto;
  margin: 0;
  padding: 6px;
  list-style: none;
  z-index: 20;
}
.search-results.hidden { display: none; }
.search-results li {
  padding: 9px 10px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  gap: 8px;
}
.search-results li.active,
.search-results li:hover { background: #1f2937; }
.search-results .code { color: #93c5fd; font-weight: 700; }
.card-wrap { flex:1; display:flex; align-items:center; perspective: 1000px; }
.card {
  width:100%; min-height:52dvh; border-radius:20px; background:transparent;
  position:relative; transform-style:preserve-3d; transition: transform 220ms ease;
  touch-action: pan-y; user-select:none;
}
.card.flipped { transform: rotateY(180deg); }
.face {
  position:absolute; inset:0; border-radius:20px; background:var(--card);
  border:1px solid #1f2937; box-shadow:0 14px 36px rgba(0,0,0,.38);
  backface-visibility:hidden; display:flex; flex-direction:column; padding:18px;
  transition: background-color 180ms ease, border-color 180ms ease, box-shadow 180ms ease;
}
.card.correct-flash .face {
  background: #22c55e;
  border-color: #4ade80;
  box-shadow: 0 16px 40px rgba(34, 197, 94, 0.38);
}
.card.wrong-flash .face {
  background: #b91c1c;
  border-color: #ef4444;
  box-shadow: 0 16px 40px rgba(239, 68, 68, 0.35);
}
.back { transform: rotateY(180deg); }
.visual { flex:1; display:grid; place-items:center; overflow:hidden; }
.visual img { max-width:100%; max-height:34dvh; filter: invert(1) brightness(1.05); }
.visual img.flag-img { max-width: 100%; max-height: 36dvh; border-radius: 10px; object-fit: contain; filter: none; border: 1px solid #374151; }
.label { text-align:center; font-size:1.3rem; font-weight:700; margin-top:8px; }
.label.top { margin-top: 0; margin-bottom: 8px; }
.sub { text-align:center; color:var(--muted); margin-top:4px; font-weight:600; }
.actions { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; }
.btn { border:0; border-radius:12px; padding:12px 10px; color:#fff; font-weight:700; }
.btn.wrong{ background:#991b1b; } .btn.right{ background:#166534; } .btn.neutral{ background:#334155; }
.hint { text-align:center; color:var(--muted); margin:4px 0 0; }
.toast {
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
  background:rgba(17,24,39,.95); border:1px solid #374151; border-radius:999px;
  padding:10px 14px; opacity:0; pointer-events:none; transition:opacity 120ms ease;
}
.toast.show { opacity:1; }
.settings {
  position: absolute; right:16px; top:60px; width:220px; background:#111827;
  border:1px solid #374151; border-radius:14px; padding:12px; z-index:10;
  display:flex; flex-direction:column; gap:10px;
}
.settings.hidden { display:none; }
.settings h2 { margin:0 0 4px 0; font-size:1rem; }
.settings label { display:flex; gap:8px; align-items:center; }
